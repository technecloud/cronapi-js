(function(){"use strict";this.cronapi={},this.doEval=function(a){return a},this.evalInContext=function(js){return eval("doEval("+js+")")},this.cronapi.conversion={},this.cronapi.conversion.asciiToBinary=function(a){var b="";if(a.length>0)for(var c=0;c<a.length;c++)for(var d=a.charCodeAt(c),e=7;e>=0;e--)b+=d>>e&1;return b},this.cronapi.conversion.toBoolean=function(a){return parseBoolean(a)},this.cronapi.conversion.toBytes=function(a){return a?a.toString():""},this.cronapi.conversion.chrToAscii=function(a){return a?a.charCodeAt(0):null},this.cronapi.conversion.stringToJs=function(a){return stringToJs(a)},this.cronapi.conversion.stringToDate=function(value){var pattern=/^\s*(\d+)[\/\.-](\d+)[\/\.-](\d+)(\s(\d+):(\d+):(\d+))?\s*$/;if(value){if(value instanceof Date)return value;if(pattern.test(value)){var splited=pattern.exec(value),userLang=(navigator.language||navigator.userLanguage).split("-")[0];if("pt"==userLang||"en"==userLang){var functionToCall=eval(userLang+"Date");return functionToCall(splited)}return new Date(value)}return new Date(value)}return null},this.cronapi.conversion.intToHex=function(a){return Number(a).toString(16).toUpperCase()},this.cronapi.conversion.toLong=function(a){return parseInt(a)},this.cronapi.conversion.toString=function(a){return a?new String(a):""},this.cronapi.util={},this.cronapi.util.callServerBlocklyAsync=function(a,b,c){var d="api/cronapi/call/#classNameWithMethod#/".replace("#classNameWithMethod#",a),e=cronapi.$scope.http,f=[];$(arguments).each(function(){f.push(this)}),e({method:"POST",url:d,data:JSON.stringify(f.slice(3)),headers:{"Content-Type":"application/json"}}).success(b).error(c)},this.cronapi.util.makeCallServerBlocklyAsync=function(blocklyWithFunction,callbackSuccess,callbackError){var paramsApply=[];paramsApply.push(blocklyWithFunction),paramsApply.push(function(data){"string"==typeof callbackSuccess?eval(callbackSuccess)(evalInContext(data)):callbackSuccess&&callbackSuccess(evalInContext(data))}),paramsApply.push(function(data){if("string"==typeof callbackError)eval(callbackError)(evalInContext(data));else if(callbackError)callbackError(evalInContext(data));else{var message="Unknown error";data&&data.message&&(message=data.message),cronapi.$scope.Notification.error(message)}}),$(arguments).each(function(a){a>=3&&paramsApply.push(this)}),cronapi.util.callServerBlocklyAsync.apply(this,paramsApply)},this.cronapi.util.callServerBlocklyNoReturn=function(){cronapi.util.callServerBlockly.apply(this,arguments)},this.cronapi.util.callServerBlockly=function(a){for(var b="api/cronapi/call/#classNameWithMethod#/".replace("#classNameWithMethod#",a),c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);var e="";window.uToken&&(e=window.uToken);var g,f=$.ajax({type:"POST",url:b,data:JSON.stringify(c),async:!1,headers:{"Content-Type":"application/json","X-AUTH-TOKEN":e,toJS:!0}});return 200==f.status?g=f.responseJSON?f.responseJSON:evalInContext(f.responseText):cronapi.$scope.Notification.error(f.responseJSON.message),g},this.cronapi.screen={},this.cronapi.screen.changeValueOfField=function(a,b){try{cronapi.$scope.__tempValue=b;var c=new Function("cronapi.$scope."+a+" = cronapi.$scope.__tempValue;");cronapi.$scope.safeApply(c.bind(cronapi.$scope))}catch(a){alert(a)}},this.cronapi.screen.getValueOfField=function(field){try{return field&&field.length>0?field.indexOf("vars.")>-1?eval("cronapi.$scope."+field):eval(field):""}catch(a){alert(a)}},this.cronapi.dateTime={},this.cronapi.dateTime.getSecond=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getSeconds():0},this.cronapi.dateTime.getMinute=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getMinutes():0},this.cronapi.dateTime.getHour=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getHours():0},this.cronapi.dateTime.getYear=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getFullYear():0},this.cronapi.dateTime.getMonth=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getMonth()+1:0},this.cronapi.dateTime.getDay=function(a){var b=cronapi.conversion.stringToDate(a);return b?b.getDate():0},this.cronapi.dateTime.getDaysBetweenDates=function(a,b){var d=cronapi.conversion.stringToDate(a),e=cronapi.conversion.stringToDate(b);return Math.round((d.getTime()-e.getTime())/864e5)},this.cronapi.dateTime.getMonthsBetweenDates=function(a,b){var c=0,d=0,e=cronapi.conversion.stringToDate(a),f=cronapi.conversion.stringToDate(b);return e&&f&&(d=12*(e.getFullYear()-f.getFullYear()),c=e.getMonth()-f.getMonth(),c+=d,f<e&&e.getDate()<f.getDate()?c--:f>e&&e.getDate()>f.getDate()&&c++),c},this.cronapi.dateTime.getYearsBetweenDates=function(a,b){var c=0,d=cronapi.conversion.stringToDate(a),e=cronapi.conversion.stringToDate(b);return d&&e&&(c=d.getFullYear()-e.getFullYear(),e<d&&(d.getDate()<e.getDate()||d.getMonth()<e.getMonth())?c--:e>d&&(d.getDate()>e.getDate()||d.getMonth()>e.getMonth())&&c++),c},this.cronapi.dateTime.incDay=function(a,b){var c=cronapi.conversion.stringToDate(a);return c.setDate(c.getDate()+b),c},this.cronapi.dateTime.incMonth=function(a,b){var c=cronapi.conversion.stringToDate(a);return c.setMonth(c.getMonth()+b),c},this.cronapi.dateTime.incYear=function(a,b){var c=cronapi.conversion.stringToDate(a);return c.setFullYear(c.getFullYear()+b),c},this.cronapi.dateTime.getNow=function(){return new Date},this.cronapi.dateTime.formatDateTime=function(date,format){for(var dateVar=cronapi.conversion.stringToDate(date),dd=dateVar.getDate(),mm=dateVar.getMonth()+1,yyyy=dateVar.getFullYear(),separator="",maskChars="dmy",i=0;i<format.length;i++)if(!maskChars.includes(format.toLowerCase().charAt(i))){separator=format.toLowerCase().charAt(i);var formatLower=replaceAll(format.toLowerCase(),separator,"+separator+");return eval(formatLower)}return""},this.cronapi.dateTime.newDate=function(a,b,c,d,e,f){var g=new Date;return g.setYear(a),g.setMonth(b-1),g.setDate(c),g.setHours(d),g.setMinutes(e),g.setSeconds(f),g},this.cronapi.dateTime.getValueIsNotNumber=function(a){for(var b="0123456789",c=0;c<a.length;c++)if(!b.includes(a.charAt(c)))return a.charAt(c);return""},this.cronapi.xml={},this.cronapi.xml.XMLGetElementValue=function(a){return a.firstChild?a.firstChild.nodeValue:null},this.cronapi.xml.XMLGetChildElement=function(a,b){var c=a.getElementsByTagName(b);if(c.length>0)return c[0]},this.cronapi.xml.XMLGetRoot=function(a){if(a)return doc.documentElement},this.cronapi.xml.XMLGetAttribute=function(a,b){return node.getAttribute(b)},this.cronapi.xml.XMLOpen=function(a){var b=null;if(document.implementation&&document.implementation.createDocument){return b=(new DOMParser).parseFromString(a,"application/xml"),fixXMLDocument(b),b}return b=new ActiveXObject("MSXML2.DOMDocument"),b.loadXML(a),b},this.cronapi.xml.XMLGetChildrenElement=function(a,b){return b?a.getElementsByTagName(b):a.childNodes},this.cronapi.xml.XMLGetParentElement=function(b){return b.parentNode},this.cronapi.xml.XMLGetElementTagName=function(b){return b.tagName};var ptDate=function(a){var c=a[1],d=a[2],e=a[3],f=a[5],g=a[6],h=a[7];return f?new Date(e,d-1,c,f,g,h):new Date(e,d-1,c,0,0,0)},enDate=function(a){var c=a[1],d=a[2],e=a[3],f=a[5],g=a[6],h=a[7];return f?new Date(e,c-1,d,f,g,h):new Date(e,c-1,d,0,0,0)},parseBoolean=function(a){return!!a&&("boolean"==typeof a?a:"1"==(a=a.toString().toLowerCase().trim())||"true"==a)},removeAccents=function(a){for(withAccents="áàãâäéèêëíìîïóòõôöúùûüçÁÀÃÂÄÉÈÊËÍÌÎÏÓÒÕÖÔÚÙÛÜÇ",withoutAccents="aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC",newValue="",i=0;i<a.length;i++)withAccents.search(a.substr(i,1))>=0?newValue+=withoutAccents.substr(withAccents.search(a.substr(i,1)),1):newValue+=a.substr(i,1);return newValue},arrayRemove=function(a,b){var c=arrayIndexOf(a,b);-1!=c&&a.splice(c,1)},arrayIndexOf=function(a,b){var c=-1;return $(a).each(function(a){b==this&&(c=a)}),c},replaceAll=function(a,b,c){return a.toString().split(b).join(c)},getWindowHeight=function(){$(window).height()},getWindowWidth=function(){$(window).width()},Url={encode:function(a){return escape(this._utf8_encode(a))},decode:function(a){return this._utf8_decode(unescape(a))},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},stringToJs=function(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}}).bind(window)();